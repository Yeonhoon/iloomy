<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="items">

	<select id="selectAll" resultType="item">
		select items_no, items_name, items_company,
		items_price,items_context, items_color, items_stock,
		items_model, items_manufacture, items_origin, items_option,
		items_attachtype, items_attachoname, items_attachsname from
		items order by items_no
	</select>

	<select id="selectByPk" parameterType="int" resultType="item">
		select items_no, items_name, items_company,
		items_price,items_context, items_color, items_stock,
		items_model, items_manufacture, items_origin, items_option,
		items_attachtype, items_attachoname, items_attachsname 
		from items
		where items_no = #{itemsNo}
	</select>
	
	<!-- items items_no로 불러오기 -->
	<select id="selectByItemsItemsNo" parameterType="int" resultType="itemimages">
		select detail_no, detail1, image1_attachtype, image1_attachoname, image1_attachsname, items_items_no
		from items_images
		where items_items_no = #{items_items_no}
	</select>
	
	<select id="selectByDetailNo" parameterType="int" resultType="itemimages">
		select detail_no, detail1, image1_attachtype, image1_attachoname, image1_attachsname, items_items_no
		from items_images
		where detail_no = #{detailNo}
	</select>	
	
	<insert id="insert" parameterType="item">
		<selectKey keyProperty="itemsNo" resultType="int" order="BEFORE">
			select items_seq.nextval from dual
		</selectKey>
		insert into items
		(items_no, items_name, items_company,
			items_price, items_context, items_color, items_stock,
			items_option, items_model, items_manufacture, items_origin,
			items_attachoname, items_attachsname, items_attachtype)
		values 
			(#{itemsNo}, #{itemsName}, #{itemsCompany},
			#{itemsPrice}, #{itemsContext}, #{itemsColor}, #{itemsStock},
			#{itemsOption}, #{itemsModel}, #{itemsManufacture},
			#{itemsOrigin}, #{itemsAttachOname}, #{itemsAttachSname},
			#{itemsAttachtype})
	</insert>
	
	<insert id="insertimages" parameterType="itemimages">
		insert into items_images
			(detail_no,
			items_items_no,
			detail1,
			image1_attachtype,
			image1_attachoname,
			image1_attachsname)
		values
			(itemsimages_seq.nextval,
			#{itemsItemsNo},
			#{detail1},
			#{image1Attachtype},
			#{image1AttachOname},
			#{image1AttachSname})
	</insert>
 
	<update id="update" parameterType="item">
		update items set items_name = #{itemsName}, items_company =
		#{itemsCompany}, items_price = #{itemsPrice}, items_color=
		#{itemsColor}, items_option= #{itemsOption}, items_stock =
		#{itemsStock}, items_model = #{itemsModel}, items_maunfacture =
		#{itemsManufacture}, items_origin = #{itemsOrigin},
		items_attachoname = #{itemsAttachOname}, items_attachsname =
		#{itemsAttachSname}, items_attachtype = #{itemsAttachtype}
	</update>

	<select id="listByPk" parameterType="int" resultType="item">
		select items_no, items_name, items_company,
		items_price,items_context, items_color, items_stock,
		items_model, items_manufacture, items_origin, items_option,
		items_attachtype, items_attachoname, items_attachsname from
		items where items_no = #{itemsNo}
	</select>

	<select id="selectItem" parameterType="hashmap" resultType="item">
		select items_no, items_name, items_company,
		items_price,items_context, items_color, items_stock,
		items_model, items_manufacture, items_origin, items_option,
		items_attachtype, items_attachoname, items_attachsname from
		items where items_name = #{itemsName} AND
		items_color=#{itemsColor} AND items_option = #{itemsOption}
	</select>


</mapper>